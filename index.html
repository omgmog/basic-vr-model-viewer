<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Basic VR Model Viewer</title>
  <style>body,html{height: 100%;width:100%;margin:0;padding:0;overflow:hidden;}</style>
</head>
<body>
  <script src="js/three.min.js"></script>
  <script src="js/StereoEffect.js"></script>
  <script src="js/DeviceOrientationControls.js"></script>
  <script src="js/OrbitControls.js"></script>
  <script src="js/OBJLoader.js"></script>
  <script src="js/MTLLoader.js"></script>
  <script>
    var clock = new THREE.Clock();

      var container;
      var camera, scene, controls, raycaster, renderer, room;


      function onMobileDevice() {
        return /Android/i.test(navigator.userAgent) || /iPhone|iPad|iPod/i.test(navigator.userAgent);
      };

      function init() {
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 10);

        if (onMobileDevice()) {
          controls = new THREE.DeviceOrientationControls(camera);
        } else {
          controls = new THREE.OrbitControls(camera);
        }

        scene.add(camera);

        // Create a box for us to be inside
        room = new THREE.Mesh(
          new THREE.BoxGeometry( 6, 6, 6, 8, 8, 8 ),
          new THREE.MeshBasicMaterial( { color: 0x404040, wireframe: true } )
        );
        scene.add( room );

        // Add some lights
        var light = new THREE.AmbientLight( 0x606060 );
        light.position.set(0, 10, 1);
        scene.add(light);

        var directional = new THREE.DirectionalLight(0xffffff, 1);
        scene.add(directional);

      /////////////////////////////////////////////////
      //  IMPORTANT BIT WHERE YOU LOAD THE MODEL
      /////////////////////////////////////////////////


        // Load a model!
        var mtlLoader = new THREE.MTLLoader();
        var objLoader = new THREE.OBJLoader();

        var material = 'Stormtrooper.mtl';
        var model = 'Stormtrooper.obj';

        // first load the materials (textures)
        mtlLoader.load(material, function (mat) {
          mat.preload();
          // Apply them to the object (model) loader
          objLoader.setMaterials(mat);

          // Load the model
          objLoader.load(model, function (obj) {
            // Adust the scale
            obj.scale.set(.5,.5,.5);
            // Position it
            obj.position.set(0, -1, -2);
            // Add it to the scene once it has loaded
            scene.add(obj);
          });
        });



        // Set up the renderer
        renderer = new THREE.WebGLRenderer( { antialias: true } );
        renderer.setClearColor( 0x505050 );
        renderer.setPixelRatio( window.devicePixelRatio );
        renderer.setSize( window.innerWidth, window.innerHeight );
        renderer.sortObjects = false;
        document.body.appendChild( renderer.domElement );

        window.addEventListener( 'resize', onWindowResize, false );
      }
      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize( window.innerWidth, window.innerHeight );
      }
      function animate() {
        // Stuff to do every frame here


        controls.update();
        renderer.render( scene, camera );
        requestAnimationFrame(animate);
      }

      init();
      animate();

  </script>
</body>
</html>